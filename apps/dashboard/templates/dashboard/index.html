{% extends "default.html" %}
{% load static %}
{% block content %}

<!--begin::Content-->
<div class="content  d-flex flex-column flex-column-fluid" id="kt_content">
	<!--begin::Subheader-->
	<div class="subheader py-2 py-lg-4  subheader-solid " id="kt_subheader">
		<div class=" container-fluid  d-flex align-items-center justify-content-between flex-wrap flex-sm-nowrap">
			<!--begin::Info-->
			<div class="d-flex align-items-center flex-wrap mr-1">
				<!--begin::Page Heading-->
				<div class="d-flex align-items-baseline flex-wrap mr-5">
					<!--begin::Page Title-->
					<h5 class="text-dark font-weight-bold my-1 mr-5">
						Dashboard 
					</h5>
					<!--end::Page Title-->

					<!--begin::Breadcrumb-->
					<!--end::Breadcrumb-->
				</div>
				<!--end::Page Heading-->
			</div>
			<!--end::Info-->
		</div>
	</div>
	<!--end::Subheader-->
	<!--begin::Entry-->
	<div class="d-flex flex-column-fluid">
		<!--begin::Container-->
		<div class=" container ">
			<div class="row">
				<div class="col-lg-3">
					<!--begin::Stats Widget 13-->
					<a href="{% url 'users.index' %}" class="card card-custom bg-dark bg-hover-state-dark card-stretch gutter-b">
						<!--begin::Body-->
						<div class="card-body">
							<span class="svg-icon menu-icon-dark svg-icon-3x ml-nl">
								<?xml version="1.0" encoding="utf-8"?><!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools -->
<svg width="800px" height="800px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M9 1.25C6.37665 1.25 4.25 3.37665 4.25 6C4.25 8.62335 6.37665 10.75 9 10.75C11.6234 10.75 13.75 8.62335 13.75 6C13.75 3.37665 11.6234 1.25 9 1.25ZM5.75 6C5.75 4.20507 7.20507 2.75 9 2.75C10.7949 2.75 12.25 4.20507 12.25 6C12.25 7.79493 10.7949 9.25 9 9.25C7.20507 9.25 5.75 7.79493 5.75 6Z" fill="#fff"/>
<path d="M15 2.25C14.5858 2.25 14.25 2.58579 14.25 3C14.25 3.41421 14.5858 3.75 15 3.75C16.2426 3.75 17.25 4.75736 17.25 6C17.25 7.24264 16.2426 8.25 15 8.25C14.5858 8.25 14.25 8.58579 14.25 9C14.25 9.41421 14.5858 9.75 15 9.75C17.0711 9.75 18.75 8.07107 18.75 6C18.75 3.92893 17.0711 2.25 15 2.25Z" fill="#fff"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M3.67815 13.5204C5.07752 12.7208 6.96067 12.25 9 12.25C11.0393 12.25 12.9225 12.7208 14.3219 13.5204C15.7 14.3079 16.75 15.5101 16.75 17C16.75 18.4899 15.7 19.6921 14.3219 20.4796C12.9225 21.2792 11.0393 21.75 9 21.75C6.96067 21.75 5.07752 21.2792 3.67815 20.4796C2.3 19.6921 1.25 18.4899 1.25 17C1.25 15.5101 2.3 14.3079 3.67815 13.5204ZM4.42236 14.8228C3.26701 15.483 2.75 16.2807 2.75 17C2.75 17.7193 3.26701 18.517 4.42236 19.1772C5.55649 19.8253 7.17334 20.25 9 20.25C10.8267 20.25 12.4435 19.8253 13.5776 19.1772C14.733 18.517 15.25 17.7193 15.25 17C15.25 16.2807 14.733 15.483 13.5776 14.8228C12.4435 14.1747 10.8267 13.75 9 13.75C7.17334 13.75 5.55649 14.1747 4.42236 14.8228Z" fill="#fff"/>
<path d="M18.1607 13.2674C17.7561 13.1787 17.3561 13.4347 17.2674 13.8393C17.1787 14.2439 17.4347 14.6439 17.8393 14.7326C18.6317 14.9064 19.2649 15.2048 19.6829 15.5468C20.1014 15.8892 20.25 16.2237 20.25 16.5C20.25 16.7507 20.1294 17.045 19.7969 17.3539C19.462 17.665 18.9475 17.9524 18.2838 18.1523C17.8871 18.2717 17.6624 18.69 17.7818 19.0867C17.9013 19.4833 18.3196 19.708 18.7162 19.5886C19.5388 19.3409 20.2743 18.9578 20.8178 18.4529C21.3637 17.9457 21.75 17.2786 21.75 16.5C21.75 15.6352 21.2758 14.912 20.6328 14.3859C19.9893 13.8593 19.1225 13.4783 18.1607 13.2674Z" fill="#fff"/>
</svg>
							<!--end::Svg Icon-->
						</span>

							<div class="card-title font-weight-bolder text-light font-size-h2 mb-0 mt-6 d-block">
								{{total_user}}
							</div>
							<div class="font-weight-bold text-light  font-size-sm">
								Total Active Users
							</div>
						</div>
						<!--end::Body-->
					</a>
					<!--end::Stats Widget 13-->
				</div>
			</div>

			
			<div class="row">
				<div class="col-12">
					<div class="card card-custom gutter-b">
						<!--begin::Header-->
						<div class="card-header border-0 py-5">
							<h3 class="card-title align-items-start flex-column">
								<span class="card-label font-weight-bolder text-dark">
									Recent {{model_name_plural}}
								</span>
								<span class="text-muted mt-3 font-weight-bold font-size-sm">More than
									{{ total_users }}+ {{model_name_plural}}
								</span>
							</h3>
							<div class="card-toolbar">
								<a href="{% url 'users.index' %}"
									class="btn btn-info font-weight-bolder font-size-sm mr-3">View
									All
								</a>
							</div>
						</div> 
						<!--end::Header-->
						<!--begin::Body-->

						<div class="card-body pt-0 pb-3">
							<div class="tab-content">
								<!--begin::Table-->
								<div class="table-responsive">
									<table
										class="table table-head-custom table-head-bg table-borderless table-vertical-center">
										<thead>
											<tr class="text-left text-uppercase">
												<th>
													<span class="text-dark-75">SN</span>
												</th>
												<th style="min-width: 100px" class="pl-7">
													<span class="text-dark-75">Name</span>
												</th>
												<th style="min-width: 100px">
													<span class="text-dark-75">Email</span>
												</th>

												<th style="min-width: 100px">
													<span class="text-dark-75">Mobile</span>
												</th>

												<th style="min-width: 100px">
													<span class="text-dark-75">Status</span>
												</th>
											</tr>
										</thead>
										<tbody>
											{% if users %}
												{% for user in users %}
													<tr>
														<td>
															<div class="symbol symbol-30 symbol-light mr-4">
																<span class="symbol-label font-weight-bold text-dark-75">
																	{{ forloop.counter }}
																</span>
															</div>
														</td>
														<td class="pl-0 py-8">
															<div class="d-flex align-items-center">
																<div class="text-muted font-weight-bold d-block">
																	{{ user.first_name |title }} {{user.last_name | title}}
																</div>
															</div>
														</td>
														<td>
															<span class="text-muted font-weight-bold d-block">
																{{user.email}}
															</span>
														</td>
														<td>
															<span class="text-muted font-weight-bold d-block">
																{{user.mobile_number}}
															</span>
														</td>
														<td>
															{% if user.is_active == 0 %}
																<span class="label label-lg label-light-danger label-inline">Deactive</span>
															{% else %}
																<span class="label label-lg label-light-success label-inline">Active</span>
															{% endif %}
														</td>
													</tr>
												{% endfor %}
											{% else %}
											<tr>
												<td colspan="6" style="text-align:center;"> Record not found.</td>
											</tr>
											{% endif %}
										</tbody>
									</table>
								</div>
								<!--end::Table-->
							</div>
						</div>
						<!--end::Body-->
					</div>
				</div>
			</div>
		</div>
		<!--end::Container-->
	</div>
	<!--end::Entry-->
</div>
<!--end::Content-->


<script>
	$(document).ready(function () {
		var users = '{{user_list_mnt|safe}}'
		users = JSON.parse(users)

		var _initChartsWidget5 = function () {
			var element = document.getElementById("kt_charts_widget_5_chart");

			if (!element) {
				return;
			}

			var options = {
				series: [{
					name: 'Total Users',
					type: 'bar',
					data: users['user_data_count']
				}],
				chart: {
					stacked: true,
					height: 350,
					toolbar: {
						show: false
					}
				},
				plotOptions: {
					bar: {
						stacked: true,
						horizontal: false,
						dataLabels: {
							position: 'center',
						},
					},
				},
				legend: {
					show: false
				},
				dataLabels: {
					enabled: true
				},
				stroke: {
					curve: 'smooth',
					show: true,
					width: 2,
					colors: ['transparent']
				},
				xaxis: {
					categories: users['user_data_mnt'],
					axisBorder: {
						show: false,
					},
					axisTicks: {
						show: false
					},
				},
				yaxis: {
					labels: {
						style: {
							colors: KTApp.getSettings()['colors']['gray']['gray-500'],
							fontSize: '12px',
							fontFamily: KTApp.getSettings()['font-family']
						},
						formatter: function (val, index) {
							return Math.round(val);
						}
					}
				},
				fill: {
					opacity: 1
				},
				states: {
					normal: {
						filter: {
							type: 'none',
							value: 0
						}
					},
					hover: {
						filter: {
							type: 'none',
							value: 0
						}
					},
					active: {
						allowMultipleDataPointsSelection: false,
						filter: {
							type: 'none',
							value: 0
						}
					}
				},
				tooltip: {
					style: {
						fontSize: '12px',
						fontFamily: KTApp.getSettings()['font-family']
					},
					y: {
						formatter: function (val) {
							return val
						}
					}
				},
				colors: [KTApp.getSettings()['colors']['theme']['base']['info'], KTApp.getSettings()['colors']['theme']['base']['primary'], KTApp.getSettings()['colors']['theme']['light']['primary']],
				grid: {
					borderColor: KTApp.getSettings()['colors']['gray']['gray-200'],
					strokeDashArray: 4,
					yaxis: {
						lines: {
							show: true
						}
					},
					padding: {
						top: 0,
						right: 0,
						bottom: 0,
						left: 0
					}
				}
			};

			var chart = new ApexCharts(element, options);
			chart.render();
		}


		_initChartsWidget5();

	});
</script>
{% endblock %}